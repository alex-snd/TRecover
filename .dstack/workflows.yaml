workflows:
  - name: train
    help: 'Starts collaborative training'
    provider: bash
    python: 3.8
    commands:
      - apt update && apt upgrade -y && apt install git -y
      - git clone https://github.com/alex-snd/TRecover.git
      - cd TRecover
      - pip install ".[collab]"
      - trecover init
      - trecover download data
      - trecover collab train --initial-peers /ip4/95.216.202.215/tcp/34234/p2p/QmS2mYPX8Q78RDQzxMf17phVYPashi4C6ixVbA3jrj9yxt --client-mode --batch-size 24  --experiment-prefix demo4 --train-dataset-size 1000000 --bandwidth 500 --backup-every-step 1 --no-args-sync
    resources:
      shm_size: '16GB'
      gpu:
        name: 'V100'
        memory: '16GB'
        count: 1